{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Kyll/PycharmProjects/KyllCVChat/app/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Kyll/PycharmProjects/KyllCVChat/app/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import React,{useState}from'react';import{Button}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChatBox=function ChatBox(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),pageId=_useState2[0],setPageId=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),chatHistory=_useState4[0],setChatHistory=_useState4[1];// New state to store chat history\nvar sendPageInfo=function sendPageInfo(){axios.post('/api/aichat',{userInput:pageId}).then(function(response){console.log('Success:',response.data);var userQuestion=\"Q: \".concat(pageId);var aiResponse=\"A: \".concat(response.data.message);// Add the new chat entry to the chat history array\nvar newChatEntry={user:userQuestion,ai:aiResponse};var updatedChatHistory=[].concat(_toConsumableArray(chatHistory),[newChatEntry]);// Keep only the last 5 chat entries\nvar trimmedChatHistory=updatedChatHistory.slice(-5);setChatHistory(trimmedChatHistory);setPageId('');}).catch(function(error){console.error('Error:',error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Chat with your AI Calendar\"}),/*#__PURE__*/_jsx(\"div\",{className:\"chatbox-div\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea\",readOnly:true,value:chatHistory.map(function(entry){return entry.user+'\\n'+entry.ai;}).join('\\n')})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"What would you like to ask?\",value:pageId,onChange:function onChange(e){return setPageId(e.target.value);}}),/*#__PURE__*/_jsx(Button,{onClick:sendPageInfo,children:\"Send Message\"})]})]});};export default ChatBox;","map":{"version":3,"names":["axios","React","useState","Button","jsx","_jsx","jsxs","_jsxs","ChatBox","_useState","_useState2","_slicedToArray","pageId","setPageId","_useState3","_useState4","chatHistory","setChatHistory","sendPageInfo","post","userInput","then","response","console","log","data","userQuestion","concat","aiResponse","message","newChatEntry","user","ai","updatedChatHistory","_toConsumableArray","trimmedChatHistory","slice","catch","error","className","children","readOnly","value","map","entry","join","type","placeholder","onChange","e","target","onClick"],"sources":["C:/Users/Kyll/PycharmProjects/KyllCVChat/app/frontend/src/components/ChatBox.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useState } from 'react';\r\nimport { Button } from 'react-bootstrap';\r\n\r\nconst ChatBox = () => {\r\n  const [pageId, setPageId] = useState('');\r\n  const [chatHistory, setChatHistory] = useState([]); // New state to store chat history\r\n\r\n  const sendPageInfo = () => {\r\n    axios\r\n      .post('/api/aichat', {\r\n        userInput: pageId,\r\n      })\r\n      .then(response => {\r\n        console.log('Success:', response.data);\r\n        const userQuestion = `Q: ${pageId}`;\r\n        const aiResponse = `A: ${response.data.message}`;\r\n\r\n        // Add the new chat entry to the chat history array\r\n        const newChatEntry = { user: userQuestion, ai: aiResponse };\r\n        const updatedChatHistory = [...chatHistory, newChatEntry];\r\n\r\n        // Keep only the last 5 chat entries\r\n        const trimmedChatHistory = updatedChatHistory.slice(-5);\r\n\r\n        setChatHistory(trimmedChatHistory);\r\n        setPageId('');\r\n      })\r\n      .catch(error => {\r\n        console.error('Error:', error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"main-content\">\r\n      <h2 className=\"text-center\">Chat with your AI Calendar</h2>\r\n      <div className=\"chatbox-div\">\r\n        <textarea className=\"textarea\" readOnly value={chatHistory.map(entry => entry.user + '\\n' + entry.ai).join('\\n')} />\r\n      </div>\r\n      <div className=\"input-group\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"What would you like to ask?\"\r\n          value={pageId}\r\n          onChange={e => setPageId(e.target.value)}\r\n        />\r\n        <Button onClick={sendPageInfo}>Send Message</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatBox;"],"mappings":"8RAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,MAAM,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEzC,GAAM,CAAAC,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAA,CAAS,CACpB,IAAAC,SAAA,CAA4BP,QAAQ,CAAC,EAAE,CAAC,CAAAQ,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjCG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IACxB,IAAAI,UAAA,CAAsCZ,QAAQ,CAAC,EAAE,CAAC,CAAAa,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA3CE,WAAW,CAAAD,UAAA,IAAEE,cAAc,CAAAF,UAAA,IAAkB;AAEpD,GAAM,CAAAG,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzBlB,KAAK,CACFmB,IAAI,CAAC,aAAa,CAAE,CACnBC,SAAS,CAAER,MACb,CAAC,CAAC,CACDS,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAChBC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAEF,QAAQ,CAACG,IAAI,CAAC,CACtC,GAAM,CAAAC,YAAY,OAAAC,MAAA,CAASf,MAAM,CAAE,CACnC,GAAM,CAAAgB,UAAU,OAAAD,MAAA,CAASL,QAAQ,CAACG,IAAI,CAACI,OAAO,CAAE,CAEhD;AACA,GAAM,CAAAC,YAAY,CAAG,CAAEC,IAAI,CAAEL,YAAY,CAAEM,EAAE,CAAEJ,UAAW,CAAC,CAC3D,GAAM,CAAAK,kBAAkB,IAAAN,MAAA,CAAAO,kBAAA,CAAOlB,WAAW,GAAEc,YAAY,EAAC,CAEzD;AACA,GAAM,CAAAK,kBAAkB,CAAGF,kBAAkB,CAACG,KAAK,CAAC,CAAC,CAAC,CAAC,CAEvDnB,cAAc,CAACkB,kBAAkB,CAAC,CAClCtB,SAAS,CAAC,EAAE,CAAC,CACf,CAAC,CAAC,CACDwB,KAAK,CAAC,SAAAC,KAAK,CAAI,CACdf,OAAO,CAACe,KAAK,CAAC,QAAQ,CAAEA,KAAK,CAAC,CAChC,CAAC,CAAC,CACN,CAAC,CAED,mBACE/B,KAAA,QAAKgC,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BnC,IAAA,OAAIkC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,4BAA0B,CAAI,CAAC,cAC3DnC,IAAA,QAAKkC,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1BnC,IAAA,aAAUkC,SAAS,CAAC,UAAU,CAACE,QAAQ,MAACC,KAAK,CAAE1B,WAAW,CAAC2B,GAAG,CAAC,SAAAC,KAAK,QAAI,CAAAA,KAAK,CAACb,IAAI,CAAG,IAAI,CAAGa,KAAK,CAACZ,EAAE,GAAC,CAACa,IAAI,CAAC,IAAI,CAAE,CAAE,CAAC,CACjH,CAAC,cACNtC,KAAA,QAAKgC,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BnC,IAAA,UACEyC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,6BAA6B,CACzCL,KAAK,CAAE9B,MAAO,CACdoC,QAAQ,CAAE,SAAAA,SAAAC,CAAC,QAAI,CAAApC,SAAS,CAACoC,CAAC,CAACC,MAAM,CAACR,KAAK,CAAC,EAAC,CAC1C,CAAC,cACFrC,IAAA,CAACF,MAAM,EAACgD,OAAO,CAAEjC,YAAa,CAAAsB,QAAA,CAAC,cAAY,CAAQ,CAAC,EACjD,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAhC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}